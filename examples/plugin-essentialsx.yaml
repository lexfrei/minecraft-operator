apiVersion: mc.k8s.lex.la/v1beta1
kind: Plugin
metadata:
  name: essentialsx
  namespace: default
spec:
  # Plugin source from Hangar (PaperMC plugin repository)
  source:
    type: hangar
    project: "Essentials"

  # Use latest compatible version
  updateStrategy: latest

  # Wait 7 days before applying new plugin versions
  # This allows community to report issues with new releases
  updateDelay: 168h

  # Override compatibility for versions where Hangar doesn't provide metadata
  compatibilityOverride:
    enabled: true
    minecraftVersions:
      - "1.20.x"
      - "1.21.x"

  # Apply this plugin to all servers with label "type: vanilla"
  instanceSelector:
    matchLabels:
      type: vanilla
